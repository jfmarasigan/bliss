version: 0.2

phases:
  install:
    runtime-versions:
      nodejs: 8
    commands:
      - echo Installing serverless framework...
      - npm i -g serverless
  pre_build:
    commands:
      -
  build:
    commands:
      - echo Deployment started on `date`
      - cd ctpl
      # create bucket for ctpl web app (name = ctpl.<domain>)
      # cloudformation template (?)
      -
      # copy ctpl/web to the created bucket for ctpl web app
      -
      # deploy serverless template for ctpl
      - serverless deploy
  post_build:
    commands:
      - echo Deployment done on `date`
