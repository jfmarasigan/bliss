version: 0.2

# buildspec for initial resources (buckets, etc...)

phases:
  install:
    runtime-versions:
      nodejs: 8
    commands:
      -
  pre_build:
    commands:
      -
  build:
    commands:
      - echo Deployment started on `date`
      # create stack repository
      - aws s3 mb s3://$STACK_BUCKET
      # [A] deploy lambda function that sets origin response for AWS CloudFront distributions
      # create cloudfront deployment
      # use env variables in code build to set domain
      # set origin response trigger using ARN of lambda function (see [A])
  post_build:
    commands:
      - echo Deployment done.
